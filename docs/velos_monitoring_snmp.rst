=======================================
VELOS F5OS SNMP Monitoring and Alerting
=======================================

SNMP Support for F5OS will vary by release. In the intial v1.1.x versions of F5OS SNMP support is limited to SNMP Trap support from the System Controllers & Chassis Partitions, and **IF-MIB** support for the chassis partitions. F5OS v1.2.x added addtional SNMP support including Link Up/Down Traps for chassis partittions, and support for  **IF-MIB**, **EtherLike-MIB**, & the **PLATFORM-STATS-MIB**.


Enabling SNMP via CLI
=============================

Setting up SNMP can de done from the CLI by enabling an SNMP community. Below is an example of enabling SNMP monitroing on a chassis partition:

.. code-block:: bash

    bigpartition-2(config)# SNMP-COMMUNITY-MIB snmpCommunityTable snmpCommunityEntry boyapati snmpCommunityName boyapati snmpCommunitySecurityName boyapati
    bigpartition-2(config-snmpCommunityEntry-boyapati)# exit
    bigpartition-2(config)# SNMP-VIEW-BASED-ACM-MIB vacmSecurityToGroupTable vacmSecurityToGroupEntry 2 boyapati vacmGroupName read-access
    bigpartition-2(config-vacmSecurityToGroupEntry-2/boyapati)# exit
    bigpartition-2(config)# SNMP-VIEW-BASED-ACM-MIB vacmSecurityToGroupTable vacmSecurityToGroupEntry 1 boyapati vacmGroupName read-access
    bigpartition-2(config-vacmSecurityToGroupEntry-1/boyapati)# exit
    bigpartition-2(config)# commit 
    Commit complete.

You can configure the SNMP System paramters including the System Contact, System Location, and System Name as seen below:

.. code-block:: bash

    bigpartition-2(config)# SNMPv2-MIB system sysContact jim@f5.com sysLocation Boston sysName VELOS-bigpartition
    bigpartition-2(config)# commit



It is highly recommend that you put Interface descriptions in your configuration so that this will showup when using SNMP polling:

.. code-block:: bash

    bigpartition-2(config)# interfaces interface 1/1.0
    bigpartition-2(config-interface-1/1.0)# config description "Interface-1/1.0"
    bigpartition-2(config-interface-1/1.0)# exit                              
    bigpartition-2(config)# interfaces interface 1/2.0        
    bigpartition-2(config-interface-1/2.0)# config description Interface-1/2.0
    bigpartition-2(config-interface-1/2.0)# exit                              
    bigpartition-2(config)# interfaces interface 2/1.0        
    bigpartition-2(config-interface-2/1.0)# config description Interface-2/1.0
    bigpartition-2(config-interface-2/1.0)# exit
    bigpartition-2(config)# interfaces interface 2/2.0        
    bigpartition-2(config-interface-2/2.0)# config description Interface-2/2.0
    bigpartition-2(config-interface-2/2.0)# exit
    bigpartition-2(config)# commit
    Commit complete.


If LAGs are configured decriptions should be added to the LAG interfaces as well:

.. code-block:: bash

    bigpartition-2(config)# interfaces interface Arista 
    bigpartition-2(config-interface-Arista)# config description "Arista LAG"
    bigpartition-2(config-interface-Arista)# exit
    bigpartition-2(config)# interfaces interface HA-Interconnect 
    bigpartition-2(config-interface-HA-Interconnect)# config description "HA-Interconnect LAG"
    bigpartition-2(config-interface-HA-Interconnect)# exit
    bigpartition-2(config)# commit
    Commit complete.


Polling SNMP Endpoints
=====================


You can then poll the chassis partiton via SNMP to get stats from the system using the following SNMP OID's:

-----------
SNMP System
-----------

SNMP System OID: .1.3.6.1.2.1.1

Exmaple output:

.. code-block:: bash

    sysDescr.0	Linux 3.10.0-862.14.4.el7.centos.plus.x86_64 : Partition services version 1.2.1-10781	OctetString	10.255.0.148:161
    sysObjectID.0	system	OID	10.255.0.148:161
    sysUpTime.0	1 hour 13 minutes 13.88 seconds (439388)	TimeTicks	10.255.0.148:161
    sysContact.0	jim@f5.com	OctetString	10.255.0.148:161
    sysName.0	VELOS-bigpartition	OctetString	10.255.0.148:161
    sysLocation.0	Boston	OctetString	10.255.0.148:161
    sysServices.0	72	Integer	10.255.0.148:161
    .1.3.6.1.2.1.1.8.0	190 milliseconds (19)	TimeTicks	10.255.0.148:161
    .1.3.6.1.2.1.1.9.1.2.1	platform	OID	10.255.0.148:161
    .1.3.6.1.2.1.1.9.1.2.2	.1.3.6.1.2.1.31	OID	10.255.0.148:161

------------
SNMP ifIndex
------------

You can poll the following SNMP OID to get detailed Interface stats for each physical port on the BX100 blades and also for Link Aggregation Groups that have been configured. Note that you will only ses interfaces and LAG's that are configured within the chassis partition you are monitoring. You will not have visibility into other chasssi partition interfaces of LAG's unless you poll them directly.

SNMP ifIndex OID: .1.3.6.1.2.1.2.2.1


+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| **ifIndex** | **ifDescr**         | **ifType**     | **ifMtu** | **ifSpeed** | **ifPhysAddress**  | **ifAdminStatus** | **ifOperStatus** | **ifLastChange** | **ifInOctets** | **ifInUcastPkts** | **ifInNUcastPkts** | **ifInDiscards** | **ifInErrors** | **ifInUnknownProtos** | **ifOutOctets** | **ifOutUcastPkts** | **ifOutNUcastPkts** | **ifOutDiscards** | **ifOutErrors** | **ifOutQLen** | **ifSpecific** | **Index Value** |
+=============+=====================+================+===========+=============+====================+===================+==================+==================+================+===================+====================+==================+================+=======================+=================+====================+=====================+===================+=================+===============+================+=================+
| 33554441    | Interface-1/1.0     | ethernetCsmacd | 9600      | 4294967295  | 00-94-A1-8E-D0-00  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| 33554442    | Interface-1/2.0     | ethernetCsmacd | 9600      | 4294967295  | 00-94-A1-8E-D0-01  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| 33554449    | Interface-2/1.0     | ethernetCsmacd | 9600      | 4294967295  | 00-94-A1-8E-D0-80  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| 33554450    | Interface-2/2.0     | ethernetCsmacd | 9600      | 4294967295  | 00-94-A1-8E-D0-81  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| 67108865    | Arista LAG          | ieee8023adLag  | 9600      | 4294967295  | 00-94-A1-8E-D0-0B  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+
| 67108866    | HA-Interconnect LAG | ieee8023adLag  | 9600      | 4294967295  | 00-94-A1-8E-D0-0C  | up                | up               | 0                | 0              | 0                 | 0                  | 33554441         |                |                       |                 |                    |                     |                   |                 |               |                |                 |
+-------------+---------------------+----------------+-----------+-------------+--------------------+-------------------+------------------+------------------+----------------+-------------------+--------------------+------------------+----------------+-----------------------+-----------------+--------------------+---------------------+-------------------+-----------------+---------------+----------------+-----------------+

---------------------
Chassis Partition CPU
--------------------- 

The CPU Processor Stats Table provides details on the Intel CPU processors which are running in the BX100 line card. It deals the Core & Thread Counts, as well as the Cache Size, Frequency and Model Number.

SNMP Chassis Partition CPU Processor Stats Table OID: .1.3.6.1.4.1.12276.1.2.1.1.1

+-----------+--------------+------------------+----------------+---------------+-----------------+------------------+------------------------------------------+-----------------------------+
| **Index** | **cpuIndex** | **cpuCacheSize** | **cpuCoreCnt** | **cpuFreq**   | **cpuStepping** | **cpuThreadCnt** | **cpuModelName**                         | **Index Value**             |
+===========+==============+==================+================+===============+=================+==================+==========================================+=============================+
| blade-1   | 0            | 19712(KB)        | 14             | 2552.893(MHz) | 4               | 28               | Intel(R) Xeon(R) D-2177NT CPU @ 1.90GHz  | 7.98.108.97.100.101.45.49.0 |
+-----------+--------------+------------------+----------------+---------------+-----------------+------------------+------------------------------------------+-----------------------------+
| blade-2   | 0            | 19712(KB)        | 14             | 2370.593(MHz) | 4               | 28               | Intel(R) Xeon(R) D-2177NT CPU @ 1.90GHz  | 7.98.108.97.100.101.45.50.0 |
+-----------+--------------+------------------+----------------+---------------+-----------------+------------------+------------------------------------------+-----------------------------+

---------------------------
CPU Utilization Stats Table
---------------------------

The table below shows the total CPU Utilization per blade within a chassis parition over 5 seconds, 1 minute, and 5 minutes averagesas well as the current value.

SNMP CPU Utilization Stas Table OID: .1.3.6.1.4.1.12276.1.2.1.1.2

+-------------+----------------+---------------------+---------------------+---------------------+---------------------------+
| **cpuCore** |	**cpuCurrent** | **cpuTotal5secAvg** | **cpuTotal1minAvg** | **cpuTotal5minAvg** | **Index Value**           |
+=============+================+=====================+=====================+=====================+===========================+
| cpu         | 3              | 4                   | 4                   | 4                   | 7.98.108.97.100.101.45.49 |
+-------------+----------------+---------------------+---------------------+---------------------+---------------------------+
| cpu         | 3              | 4                   | 4                   | 4                   | 7.98.108.97.100.101.45.50 |
+-------------+----------------+---------------------+---------------------+---------------------+---------------------------+

---------------------------
CPU Core Stats Table
---------------------------

The table below shows the total CPU Utilization per vCPU within a chassis parition over 5 seconds, 1 minute, and 5 minutes averages. Below is an example of a 2 blade chassis partition. Each blade has 28 vCPU's or Cores:

SNMP CPU Core Stas Table OID: .1.3.6.1.4.1.12276.1.2.1.1.3


+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| **CoreIndex** | **CoreName** | **CoreCurrent** | **CoreTotal5secAvg** | **CoreTotal1minAvg** | **CoreTotal5minAvg** | **Index Value**               |
+===============+==============+=================+======================+======================+======================+===============================+
| 0             | cpu0         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.0   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 1             | cpu1         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.1   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 2             | cpu2         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.2   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 3             | cpu3         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.3   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 4             | cpu4         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.4   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 5             | cpu5         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.5   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 6             | cpu6         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.6   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 7             | cpu7         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.7   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 8             | cpu8         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.8   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 9             | cpu9         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.9   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 10            | cpu10        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.10  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 11            | cpu11        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.11  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 12            | cpu12        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.12  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 13            | cpu13        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.13  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 14            | cpu14        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.14  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 15            | cpu15        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.15  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 16            | cpu16        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.16  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 17            | cpu17        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.17  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 18            | cpu18        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.18  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 19            | cpu19        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.19  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 20            | cpu20        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.20  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 21            | cpu21        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.21  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 22            | cpu22        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.22  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 23            | cpu23        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.23  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 24            | cpu24        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.24  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 25            | cpu25        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.25  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 26            | cpu26        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.26  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 27            | cpu27        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.49.27  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 0             | cpu0         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.0   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 1             | cpu1         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.1   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 2             | cpu2         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.2   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 3             | cpu3         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.3   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 4             | cpu4         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.4   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 5             | cpu5         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.5   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 6             | cpu6         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.6   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 7             | cpu7         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.7   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 8             | cpu8         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.8   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 9             | cpu9         | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.9   |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 10            | cpu10        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.10  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 11            | cpu11        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.11  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 12            | cpu12        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.12  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 13            | cpu13        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.13  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 14            | cpu14        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.14  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 15            | cpu15        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.15  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 16            | cpu16        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.16  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 17            | cpu17        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.17  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 18            | cpu18        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.18  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 19            | cpu19        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.19  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 20            | cpu20        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.20  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 21            | cpu21        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.21  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 22            | cpu22        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.22  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 23            | cpu23        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.23  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 24            | cpu24        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.24  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 25            | cpu25        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.25  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 26            | cpu26        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.26  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+
| 27            | cpu27        | 7               | 8                    | 8                    | 8                    | 7.98.108.97.100.101.45.50.27  |
+---------------+--------------+-----------------+----------------------+----------------------+----------------------+-------------------------------+

---------------
Disk Info Table
---------------

The following table display information bout the disks installed on each blade in the current chassis partition.

SNMP Disk Info Table OID: .1.3.6.1.4.1.12276.1.2.1.2.1

+--------------+----------------------------+----------------+-----------------+------------------+----------------+--------------+-------------------------------------------------------+
| **diskName** | **diskModel**              | **diskVendor** | **diskVersion** | **diskSerialNo** | **diskSize**   | **diskType** | **Index Value**                                       |
+==============+============================+================+=================+==================+================+==============+=======================================================+
| nvme0n1      | SAMSUNG MZ1LB960HAJQ=00007 | Samsung        | EDA7502Q        | S435NE0MA02828   | 733.00GB       | nvme         | 7.98.108.97.100.101.45.49.7.110.118.109.101.48.110.49 |
+--------------+----------------------------+----------------+-----------------+------------------+----------------+--------------+-------------------------------------------------------+
| nvme0n1      | SAMSUNG MZ1LB960HAJQ=00007 | Samsung        | EDA7502Q        | S435NE0MA00227   | 733.00GB       | nvme         | 7.98.108.97.100.101.45.50.7.110.118.109.101.48.110.49 |
+--------------+----------------------------+----------------+-----------------+------------------+----------------+--------------+-------------------------------------------------------+

----------------------------
Disk Utilization Stats Table
----------------------------

The table below shows the current disk utilzation and perfromance of the disk on each BX110 blade within the current chassis partition.

SNMP Disk Utilization Stats Table OID: .1.3.6.1.4.1.12276.1.2.1.2.2


+------------------------+-------------------+------------------+--------------------+-------------------+-----------------------+-------------------+---------------------+--------------------+-------------------------+-------------------------------------------------------+
| **diskPercentageUsed** | **diskTotalIops** | **diskReadIops** | **diskReadMerged** | **diskReadBytes** | **diskReadLatencyMs** | **diskWriteIops** | **diskWriteMerged** | **diskWriteBytes** | **diskWriteLatencyMs**  | **Index Value**                                       |                            
+========================+===================+==================+====================+===================+=======================+===================+=====================+====================+=========================+=======================================================+
|                        | 4495              | 0                | 0                  | 4390905           | 13695                 | 20511             | 32907               | 2195945            | 56163                   | 7.98.108.97.100.101.45.49.7.110.118.109.101.48.110.49 |
+------------------------+-------------------+------------------+--------------------+-------------------+-----------------------+-------------------+---------------------+--------------------+-------------------------+-------------------------------------------------------+
|                        | 4495              | 0                | 0                  | 4390905           | 13695                 | 20511             | 32907               | 2195945            | 56163                   | 7.98.108.97.100.101.45.50.7.110.118.109.101.48.110.49 |
+------------------------+-------------------+------------------+--------------------+-------------------+-----------------------+-------------------+---------------------+--------------------+-------------------------+-------------------------------------------------------+

-----------------------
Temperature Stats Table
-----------------------

The table below shows the temperature stats for the current chassis partition.

SNMP Temperature Stats Table OID: .1.3.6.1.4.1.12276.1.2.1.3.1


+----------------+-----------------+-----------------+-----------------+---------------------------+
| **tempCurent** | **tempAverage** | **tempMinimum** | **tempMaximum** | **Index Value**           |                            
+================+=================+=================+=================+===========================+
| 29.0           | 25.8            | 24.0            | 29.0            | 7.98.108.97.100.101.45.49 |
+----------------+-----------------+-----------------+-----------------+---------------------------+
| 29.0           | 26.2            | 24.0            | 30.0            | 7.98.108.97.100.101.45.50 |        
+----------------+-----------------+-----------------+-----------------+---------------------------+

------------------
Memory Stats Table
------------------

SNMP Memory Stats Table OID:.1.3.6.1.4.1.12276.1.2.1.4.1

----------------
FPGA Stats Table
----------------

The FPGA Stats table shows the current FPGA version. There are two sifferent FPGS's on each BX110 line card. The ATSE (Application Traffic Service Engine) and the VQF (VELOS Queing FPGA). 

SNMP FPGA Stats Table OID: .1.3.6.1.4.1.12276.1.2.1.5.1

+---------------+-----------------+--------------------------------------------------+
| **fpgaIndex** | **fpgaVersion** | **Index Value**                                  |                            
+===============+=================+==================================================+
| vqf_0         | 8.7.12          | 7.98.108.97.100.101.45.49.5.118.113.102.95.48    |
+---------------+-----------------+--------------------------------------------------+
| atse_0        | 7.7.3           | 7.98.108.97.100.101.45.49.6.97.116.115.101.95.48 |  
+---------------+-----------------+--------------------------------------------------+
| vqf_0         | 8.7.12          | 7.98.108.97.100.101.45.49.5.118.113.102.95.48    |
+---------------+-----------------+--------------------------------------------------+
| atse_0        | 7.7.3           | 7.98.108.97.100.101.45.49.6.97.116.115.101.95.48 |  
+---------------+-----------------+--------------------------------------------------+


SNMP Trap Support in F5OS
========================

You can enable SNMP traps in both the system controllers and within each chassis partition. The **F5-CTRLR-ALERT-NOTIF-MIB* & the **F5-PARTITION-ALERT-NOTIF-MIB** provide details of supported system controller and chassis partition SNMP traps. Below is the current full list of traps support by F5OS: 



For the system controllers the following SNMP Traps are supported as of F5OS 1.2.x:

+----------------------------+----------------------------------+
| **Alert**                  | **OID**                          |                            
+============================+==================================+
| lcd-fault                  | .1.3.6.1.4.1.12276.1.1.1.65792   |
+----------------------------+----------------------------------+
| psu-fault                  | .1.3.6.1.4.1.12276.1.1.1.65793   |
+----------------------------+----------------------------------+
| module-present             | .1.3.6.1.4.1.12276.1.1.1.65794   |
+----------------------------+----------------------------------+
| module-communication-error | .1.3.6.1.4.1.12276.1.1.1.65795   |
+----------------------------+----------------------------------+
| psu-redundancy-fault       | .1.3.6.1.4.1.12276.1.1.1.65796   |
+----------------------------+----------------------------------+
| arbitration-state          | .1.3.6.1.4.1.12276.1.1.1.66048   |
+----------------------------+----------------------------------+
| switch-status              | .1.3.6.1.4.1.12276.1.1.1.66049   |
+----------------------------+----------------------------------+
| link-state                 | .1.3.6.1.4.1.12276.1.1.1.66050   |
+----------------------------+----------------------------------+
| hardware-device-fault      | .1.3.6.1.4.1.12276.1.1.1.65536   |
+----------------------------+----------------------------------+
| firmware-fault             | .1.3.6.1.4.1.12276.1.1.1.65537   |
+----------------------------+----------------------------------+
| unknown-alarm              | .1.3.6.1.4.1.12276.1.1.1.65538   |
+----------------------------+----------------------------------+
| memory-fault               | .1.3.6.1.4.1.12276.1.1.1.65539   |
+----------------------------+----------------------------------+
| drive-fault                | .1.3.6.1.4.1.12276.1.1.1.65540   |
+----------------------------+----------------------------------+
| cpu-fault                  | .1.3.6.1.4.1.12276.1.1.1.65541   |
+----------------------------+----------------------------------+
| pcie-fault                 | .1.3.6.1.4.1.12276.1.1.1.65542   |
+----------------------------+----------------------------------+
| aom-fault                  | .1.3.6.1.4.1.12276.1.1.1.65543   |
+----------------------------+----------------------------------+
| drive-capacity-fault       | .1.3.6.1.4.1.12276.1.1.1.65544   |
+----------------------------+----------------------------------+
| power-fault                | .1.3.6.1.4.1.12276.1.1.1.65545   |
+----------------------------+----------------------------------+
| thermal-fault              | .1.3.6.1.4.1.12276.1.1.1.65546   |
+----------------------------+----------------------------------+
| drive-thermal-throttle     | .1.3.6.1.4.1.12276.1.1.1.65547   |
+----------------------------+----------------------------------+
| blade-thermal-fault        | .1.3.6.1.4.1.12276.1.1.1.65548   |
+----------------------------+----------------------------------+
| blade-hardware-fault       | .1.3.6.1.4.1.12276.1.1.1.65549   |
+----------------------------+----------------------------------+
| firmware-update-status     | .1.3.6.1.4.1.12276.1.1.1.65550   |
+----------------------------+----------------------------------+
| drive-utilization          | .1.3.6.1.4.1.12276.1.1.1.65551   |
+----------------------------+----------------------------------+
| service-health             | .1.3.6.1.4.1.12276.1.1.1.65552   |
+----------------------------+----------------------------------+
| fipsError                  | .1.3.6.1.4.1.12276.1.1.1.196608  |
+----------------------------+----------------------------------+
| core-dump                  | .1.3.6.1.4.1.12276.1.1.1.327680  |
+----------------------------+----------------------------------+


For the chassis partitions the following SNMP Traps are supported as of F5OS 1.2.x:

+----------------------------+-----------------------------------+
| **Alert**                  | **OID**                           |                            
+============================+===================================+
| hardware-device-fault      |  .1.3.6.1.4.1.12276.1.1.1.65536   |
+----------------------------+-----------------------------------+
| firmware-fault             |  .1.3.6.1.4.1.12276.1.1.1.65537   |
+----------------------------+-----------------------------------+
| unknown-alarm              |  .1.3.6.1.4.1.12276.1.1.1.65538   |
+----------------------------+-----------------------------------+
| memory-fault               |  .1.3.6.1.4.1.12276.1.1.1.65539   |
+----------------------------+-----------------------------------+
| drive-fault                |  .1.3.6.1.4.1.12276.1.1.1.65540   |
+----------------------------+-----------------------------------+
| cpu-fault                  |  .1.3.6.1.4.1.12276.1.1.1.65541   |
+----------------------------+-----------------------------------+
| pcie-fault                 |  .1.3.6.1.4.1.12276.1.1.1.65542   |
+----------------------------+-----------------------------------+
| aom-fault                  |  .1.3.6.1.4.1.12276.1.1.1.65543   |
+----------------------------+-----------------------------------+
| drive-capacity-fault       |  .1.3.6.1.4.1.12276.1.1.1.65544   |
+----------------------------+-----------------------------------+
| power-fault                |  .1.3.6.1.4.1.12276.1.1.1.65545   |
+----------------------------+-----------------------------------+
| thermal-fault              |  .1.3.6.1.4.1.12276.1.1.1.65546   |
+----------------------------+-----------------------------------+
| drive-thermal-throttle     |  .1.3.6.1.4.1.12276.1.1.1.65547   |
+----------------------------+-----------------------------------+
| blade-thermal-fault        |  .1.3.6.1.4.1.12276.1.1.1.65548   |
+----------------------------+-----------------------------------+
| blade-hardware-fault       |  .1.3.6.1.4.1.12276.1.1.1.65549   |
+----------------------------+-----------------------------------+
| firmware-update-status     |  .1.3.6.1.4.1.12276.1.1.1.65550   |
+----------------------------+-----------------------------------+
| fipsError                  |  .1.3.6.1.4.1.12276.1.1.1.196608  |
+----------------------------+-----------------------------------+
| core-dump                  |  .1.3.6.1.4.1.12276.1.1.1.327680  |
+----------------------------+-----------------------------------+


------------------------------
Enabling SNMP Traps in the CLI
------------------------------

Enter **config** mode and enter the following commands to enable SNMP traps. Specifiy your SNMP trap reciver's IP address and port after the **snmpTargetAddrTAddress** field. Make sure to **commit** any changes.

Note: The **snmpTargetAddrTAddress** is currently uniintuitive and an enhacement request has been filed to simplify the IP address and port configuration. The Trap target ip configuration for SNMP is ip + port. The calculation for port 2 octet conversion is 1st octet port >> 8 and 2nd octet is port & 255. For a typical 161 UDP port trap receiver, The 1st octet is 161 >> 8 = 0, and 2nd octet 161 & 255 = 161. The IP address configuration for an IP address of 10.255.0.139 + 161 UDP port is "10.255.0.139.0.161"


.. code-block:: bash

    syscon-1-active(config)# SNMP-NOTIFICATION-MIB snmpNotifyTable snmpNotifyEntry v2_trap snmpNotifyTag v2_trap snmpNotifyType trap snmpNotifyStorageType nonVolatile 
    syscon-1-active(config-snmpNotifyEntry-v2_trap)# exit
    syscon-1-active(config)# SNMP-TARGET-MIB snmpTargetAddrTable snmpTargetAddrEntry group2 snmpTargetAddrTDomain 1.3.6.1.6.1.1 snmpTargetAddrTAddress 10.255.0.139.0.161 snmpTargetAddrTimeout 1500 snmpTargetAddrRetryCount 3 snmpTargetAddrTagList v2_trap snmpTargetAddrParams group2 snmpTargetAddrStorageType nonVolatile snmpTargetAddrEngineID "" snmpTargetAddrTMask "" snmpTargetAddrMMS 2048 enabled
    syscon-1-active(config-snmpTargetAddrEntry-group2)# exit
    syscon-1-active(config)# SNMP-TARGET-MIB snmpTargetParamsTable snmpTargetParamsEntry group2 snmpTargetParamsMPModel 1 snmpTargetParamsSecurityModel 2 snmpTargetParamsSecurityName public snmpTargetParamsSecurityLevel noAuthNoPriv snmpTargetParamsStorageType nonVolatile
    syscon-1-active(config-snmpTargetParamsEntry-group2)# exit
    syscon-1-active(config)# commit 
    Commit complete.
    syscon-1-active(config)# 


Troubleshooting SNMP
====================

SNMP information is captured in the **snmp.log** located with the log directory of each chassis partition:

.. code-block:: bash

    bigpartition-1# file tail -n 20 log/
    Possible completions:
    audit.log  auth.log  confd.log  devel.log  ext-auth-err.log  ext-val-err.log  httpd/  logrotate.log  logrotate.log.1  logrotate.log.2.gz  partition_sync.log  rsyslogd_init.log  snmp.log  startup.log  startup.log.prev  trace/  vconsole_auth.log  vconsole_startup.log  velos.log  webui/
    bigpartition-1# file tail -n 20 log/snmp.log 
    <INFO> 24-Sep-2021::06:10:36.000 partition2 confd[103]: snmp get-next-request reqid=1512684928 172.18.104.29:50858 (INTEGER vacmAccessContextMatch.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1)(OCTET STRING vacmAccessReadViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1)(OCTET STRING vacmAccessNotifyViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1)(INTEGER vacmAccessStorageType.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1)(INTEGER vacmAccessStatus.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1)
    <INFO> 24-Sep-2021::06:10:36.003 partition2 confd[103]: snmp get-response reqid=1512684928 172.18.104.29:50858 (OCTET STRING vacmAccessReadViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=internet)(OCTET STRING vacmAccessNotifyViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=internet)(INTEGER vacmAccessStorageType.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=3)(INTEGER vacmAccessStatus.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=1)(INTEGER vacmViewSpinLock=1837836215)
    <INFO> 24-Sep-2021::06:10:43.510 partition2 confd[103]: snmp get-next-request reqid=1512684931 172.18.104.29:50859 (OCTET STRING vacmViewTreeFamilyViewName.)(OBJECT IDENTIFIER vacmViewTreeFamilySubtree.)(OCTET STRING vacmViewTreeFamilyMask.)(INTEGER vacmViewTreeFamilyType.)(INTEGER vacmViewTreeFamilyStorageType.)(INTEGER vacmViewTreeFamilyStatus.)
    <INFO> 24-Sep-2021::06:10:43.516 partition2 confd[103]: snmp get-response reqid=1512684931 172.18.104.29:50859 (OCTET STRING vacmViewTreeFamilyMask.8.105.110.116.101.114.110.101.116.4.1.3.6.1=)(OCTET STRING vacmViewTreeFamilyMask.8.105.110.116.101.114.110.101.116.4.1.3.6.1=)(OCTET STRING vacmViewTreeFamilyMask.8.105.110.116.101.114.110.101.116.4.1.3.6.1=)(INTEGER vacmViewTreeFamilyType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)(INTEGER vacmViewTreeFamilyStorageType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=3)(INTEGER vacmViewTreeFamilyStatus.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)
    <INFO> 24-Sep-2021::06:10:43.532 partition2 confd[103]: snmp get-next-request reqid=1512684934 172.18.104.29:50859 (OCTET STRING vacmViewTreeFamilyMask.8.105.110.116.101.114.110.101.116.4.1.3.6.1)(INTEGER vacmViewTreeFamilyType.8.105.110.116.101.114.110.101.116.4.1.3.6.1)(INTEGER vacmViewTreeFamilyStorageType.8.105.110.116.101.114.110.101.116.4.1.3.6.1)(INTEGER vacmViewTreeFamilyStatus.8.105.110.116.101.114.110.101.116.4.1.3.6.1)
    <INFO> 24-Sep-2021::06:10:43.533 partition2 confd[103]: snmp get-response reqid=1512684934 172.18.104.29:50859 (INTEGER vacmViewTreeFamilyType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)(INTEGER vacmViewTreeFamilyStorageType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=3)(INTEGER vacmViewTreeFamilyStatus.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)(OCTET STRING snmpCommunityName.98.111.121.97.112.97.116.105=boyapati)
    <INFO> 24-Sep-2021::06:10:53.626 partition2 confd[103]: snmp get-next-request reqid=1512684937 172.18.104.29:50860 (OCTET STRING vacmContextName.)
    <INFO> 24-Sep-2021::06:10:53.627 partition2 confd[103]: snmp get-response reqid=1512684937 172.18.104.29:50860 (OCTET STRING vacmContextName.0.=)
    <INFO> 24-Sep-2021::06:10:53.640 partition2 confd[103]: snmp get-next-request reqid=1512684940 172.18.104.29:50860 (OCTET STRING vacmContextName.0.)
    <INFO> 24-Sep-2021::06:10:53.644 partition2 confd[103]: snmp get-response reqid=1512684940 172.18.104.29:50860 (OCTET STRING vacmGroupName.1.8.98.111.121.97.112.97.116.105=read-access)
    <INFO> 24-Sep-2021::06:11:16.645 partition2 confd[103]: snmp get-bulk-request reqid=1512684943 172.18.104.29:60019 non-repeaters=0 max-repetitions=10 (platformCPUGroup)
    <INFO> 24-Sep-2021::06:11:16.649 partition2 confd[103]: snmp get-response reqid=1512684943 172.18.104.29:60019 (INTEGER snmpSetSerialNo=504343332)(OCTET STRING snmpEngineID=80:00:61:81:05:01)(INTEGER snmpEngineBoots=3)(INTEGER snmpEngineTime=52301)(INTEGER snmpEngineMaxMessageSize=50000)(Counter32 snmpUnknownSecurityModels=0)(Counter32 snmpInvalidMsgs=0)(Counter32 snmpUnknownPDUHandlers=0)(INTEGER snmpTargetSpinLock=888290400)(Counter32 snmpUnavailableContexts=0)
    <INFO> 24-Sep-2021::06:11:27.761 partition2 confd[103]: snmp get-next-request reqid=1512684946 172.18.104.29:60020 (platformCPUGroup)
    <INFO> 24-Sep-2021::06:11:27.762 partition2 confd[103]: snmp get-response reqid=1512684946 172.18.104.29:60020 (INTEGER snmpSetSerialNo=504343332)
    <INFO> 24-Sep-2021::06:11:34.792 partition2 confd[103]: snmp get-bulk-request reqid=1512684949 172.18.104.29:60021 non-repeaters=0 max-repetitions=50 (platformCPUGroup)
    <INFO> 24-Sep-2021::06:11:34.807 partition2 confd[103]: snmp get-response reqid=1512684949 172.18.104.29:60021 (INTEGER snmpSetSerialNo=504343332)(OCTET STRING snmpEngineID=80:00:61:81:05:01)(INTEGER snmpEngineBoots=3)(INTEGER snmpEngineTime=52319)(INTEGER snmpEngineMaxMessageSize=50000)(Counter32 snmpUnknownSecurityModels=0)(Counter32 snmpInvalidMsgs=0)(Counter32 snmpUnknownPDUHandlers=0)(INTEGER snmpTargetSpinLock=888290400)(Counter32 snmpUnavailableContexts=0)(Counter32 snmpUnknownContexts=0)(OCTET STRING vacmContextName.0.=)(OCTET STRING vacmGroupName.1.8.98.111.121.97.112.97.116.105=read-access)(OCTET STRING vacmGroupName.2.8.98.111.121.97.112.97.116.105=read-access)(INTEGER vacmSecurityToGroupStorageType.1.8.98.111.121.97.112.97.116.105=3)(INTEGER vacmSecurityToGroupStorageType.2.8.98.111.121.97.112.97.116.105=3)(INTEGER vacmSecurityToGroupStatus.1.8.98.111.121.97.112.97.116.105=1)(INTEGER vacmSecurityToGroupStatus.2.8.98.111.121.97.112.97.116.105=1)(INTEGER vacmAccessContextMatch.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=1)(OCTET STRING vacmAccessReadViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=internet)(OCTET STRING vacmAccessNotifyViewName.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=internet)(INTEGER vacmAccessStorageType.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=3)(INTEGER vacmAccessStatus.11.114.101.97.100.45.97.99.99.101.115.115.0.0.1=1)(INTEGER vacmViewSpinLock=1837836215)(OCTET STRING vacmViewTreeFamilyMask.8.105.110.116.101.114.110.101.116.4.1.3.6.1=)(INTEGER vacmViewTreeFamilyType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)(INTEGER vacmViewTreeFamilyStorageType.8.105.110.116.101.114.110.101.116.4.1.3.6.1=3)(INTEGER vacmViewTreeFamilyStatus.8.105.110.116.101.114.110.101.116.4.1.3.6.1=1)(OCTET STRING snmpCommunityName.98.111.121.97.112.97.116.105=boyapati)(OCTET STRING snmpCommunitySecurityName.98.111.121.97.112.97.116.105=boyapati)(OCTET STRING snmpCommunityContextEngineID.98.111.121.97.112.97.116.105=80:00:61:81:05:01)(OCTET STRING snmpCommunityContextName.98.111.121.97.112.97.116.105=)(OCTET STRING snmpCommunityTransportTag.98.111.121.97.112.97.116.105=)(INTEGER snmpCommunityStorageType.98.111.121.97.112.97.116.105=4)(INTEGER snmpCommunityStatus.98.111.121.97.112.97.116.105=1)(INTEGER snmpCommunityStatus.98.111.121.97.112.97.116.105=endOfMibView)
    <INFO> 24-Sep-2021::17:33:16.445 partition2 confd[103]: snmp get-request reqid=6725531 172.23.81.81:42802 (OCTET STRING sysDescr)
    <INFO> 24-Sep-2021::17:47:04.751 partition2 confd[103]: snmp get-request reqid=6728306 172.23.81.81:42172 (OCTET STRING sysDescr)
    <INFO> 24-Sep-2021::17:47:14.754 partition2 confd[103]: snmp get-request reqid=6728306 172.23.81.81:42172 (OCTET STRING sysDescr)
    <INFO> 24-Sep-2021::17:47:24.760 partition2 confd[103]: snmp get-request reqid=6728306 172.23.81.81:42172 (OCTET STRING sysDescr)
    bigpartition-1# 


In F5OS v1.1.x:


- Controller - SNMP Traps
- Partition - SNMP Trps, IF-MIB walk


In F%OS 1.2.x:


- - Controller - SNMP Traps
Partition - SNMP Traps, linkUp/linkDown traps,
- walk support for IF-MIB, EtherLike-MIB, PLATFORM-STATS-MIB,






